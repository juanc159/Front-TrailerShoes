import{P as M}from"./PreloadInterno-a5d99930.js";import{as as _,aB as I,b$ as W,aD as N,aE as X,c0 as K,aF as Q,B as y,b3 as ee,b6 as A,ay as T,d as l,c1 as ae,c2 as O,bZ as q,a7 as S,c3 as le,V as Y,bY as ne,aW as R,c4 as Z,c5 as te,a9 as D,c6 as se,aY as oe,c7 as ie,aZ as de,c8 as re,bR as ue,bU as ce,c9 as ve,e as pe,y as x,ca as fe,o as w,c as j,w as o,m as L,I as xe,b as E,h as p,X as me,a as z,R as ye,J as G,H as Ve,G as B,T as be,F as ge,P as Ce,O as Pe,a4 as ke,ai as Ee,aj as Se}from"./index-dd53741e.js";import{useCrudSurveyStore as _e}from"./useCrudSurveyStore-07fe3bda.js";import{V as Ie}from"./VTooltip-c58f227b.js";const g=Symbol.for("vuetify:v-expansion-panel"),Te=["default","accordion","inset","popout"],we=_()({name:"VExpansionPanels",props:{color:String,variant:{type:String,default:"default",validator:e=>Te.includes(e)},readonly:Boolean,...I(),...W(),...N(),...X()},emits:{"update:modelValue":e=>!0},setup(e,v){let{slots:n}=v;K(e,g);const{themeClasses:a}=Q(e),i=y(()=>e.variant&&`v-expansion-panels--variant-${e.variant}`);return ee({VExpansionPanel:{color:A(e,"color")},VExpansionPanelTitle:{readonly:A(e,"readonly")}}),T(()=>l(e.tag,{class:["v-expansion-panels",a.value,i.value,e.class],style:e.style},n)),{}}}),H=ne({color:String,expandIcon:{type:R,default:"$expand"},collapseIcon:{type:R,default:"$collapse"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean},"v-expansion-panel-title"),h=_()({name:"VExpansionPanelTitle",directives:{Ripple:ae},props:{...I(),...H()},setup(e,v){let{slots:n}=v;const a=O(g);if(!a)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:i,backgroundColorStyles:d}=q(e,"color"),r=y(()=>({collapseIcon:e.collapseIcon,disabled:a.disabled.value,expanded:a.isSelected.value,expandIcon:e.expandIcon,readonly:e.readonly}));return T(()=>{var m;return S(l("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":a.isSelected.value},i.value,e.class],style:[d.value,e.style],type:"button",tabindex:a.disabled.value?-1:void 0,disabled:a.disabled.value,"aria-expanded":a.isSelected.value,onClick:e.readonly?void 0:a.toggle},[l("span",{class:"v-expansion-panel-title__overlay"},null),(m=n.default)==null?void 0:m.call(n,r.value),!e.hideActions&&l("span",{class:"v-expansion-panel-title__icon"},[n.actions?n.actions(r.value):l(Y,{icon:a.isSelected.value?e.collapseIcon:e.expandIcon},null)])]),[[le("ripple"),e.ripple]])}),{}}}),$=_()({name:"VExpansionPanelText",props:{...I(),...Z()},setup(e,v){let{slots:n}=v;const a=O(g);if(!a)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:i,onAfterLeave:d}=te(e,a.isSelected);return T(()=>l(se,{onAfterLeave:d},{default:()=>{var r;return[S(l("div",{class:["v-expansion-panel-text",e.class],style:e.style},[n.default&&i.value&&l("div",{class:"v-expansion-panel-text__wrapper"},[(r=n.default)==null?void 0:r.call(n)])]),[[D,a.isSelected.value]])]}})),{}}}),U=_()({name:"VExpansionPanel",props:{title:String,text:String,bgColor:String,...I(),...oe(),...ie(),...Z(),...de(),...N(),...H()},emits:{"group:selected":e=>!0},setup(e,v){let{slots:n}=v;const a=re(e,g),{backgroundColorClasses:i,backgroundColorStyles:d}=q(e,"bgColor"),{elevationClasses:r}=ue(e),{roundedClasses:m}=ce(e),C=y(()=>(a==null?void 0:a.disabled.value)||e.disabled),P=y(()=>a.group.items.value.reduce((c,s,t)=>(a.group.selected.value.includes(s.id)&&c.push(t),c),[])),f=y(()=>{const c=a.group.items.value.findIndex(s=>s.id===a.id);return!a.isSelected.value&&P.value.some(s=>s-c===1)}),V=y(()=>{const c=a.group.items.value.findIndex(s=>s.id===a.id);return!a.isSelected.value&&P.value.some(s=>s-c===-1)});return ve(g,a),T(()=>{const c=!!(n.text||e.text),s=!!(n.title||e.title);return l(e.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":a.isSelected.value,"v-expansion-panel--before-active":f.value,"v-expansion-panel--after-active":V.value,"v-expansion-panel--disabled":C.value},m.value,i.value,e.class],style:[d.value,e.style],"aria-expanded":a.isSelected.value},{default:()=>{var t;return[l("div",{class:["v-expansion-panel__shadow",...r.value]},null),s&&l(h,{key:"title",collapseIcon:e.collapseIcon,color:e.color,expandIcon:e.expandIcon,hideActions:e.hideActions,ripple:e.ripple},{default:()=>[n.title?n.title():e.title]}),c&&l($,{key:"text",eager:e.eager},{default:()=>[n.text?n.text():e.text]}),(t=n.default)==null?void 0:t.call(n)]}})}),{}}}),Be={class:"my-5"},De={class:"demo-space-x"},Re=pe({__name:"ModalAssignEmails",props:{obj:{type:Object,required:!0}},setup(e){const{obj:v}=e,n=_e(),a=x(),i=x(""),d=x(!1),r=x(!1),m=x([]),{baseURLFont:C}=fe(),P=async()=>{var k;let s={};if(V.value=="correos"){const b=await((k=a.value)==null?void 0:k.validate());b!=null&&b.valid&&(s={survey_id:v.id,emails:i.value,serverFront:C.value,typeData:"correos"})}V.value=="cargos"&&(s={survey_id:v.id,charges:f.value,serverFront:C.value,typeData:"cargos"}),r.value=!0;const t=await n.sendEmails(s);t.code===200&&(d.value=!1),t.code===422&&(m.value=t.errors??[]),r.value=!1},f=x([]),V=x(""),c=s=>{f.value=[],i.value="",V.value=s};return(s,t)=>{const k=Se,b=M;return w(),j("div",null,[l(Ee,{modelValue:p(d),"onUpdate:modelValue":t[7]||(t[7]=u=>B(d)?d.value=u:null),width:"700"},{activator:o(({props:u})=>[l(L,xe({icon:"",color:"default",variant:"text",size:"x-small"},u,{onClick:t[0]||(t[0]=F=>d.value=!0)}),{default:o(()=>[l(Y,{size:"22",icon:"tabler-settings"}),l(Ie,{activator:"parent",location:"top"},{default:o(()=>[E("Enviar Encuesta")]),_:1})]),_:2},1040)]),default:o(()=>[l(k,{onClick:t[1]||(t[1]=u=>d.value=!p(d))}),l(me,{title:"Asignar Correos a "+e.obj.name},{default:o(()=>[S(z("div",Be,[l(b)],512),[[D,p(r)==!0]]),S(l(ye,{ref_key:"formValidation",ref:a,"lazy-validation":""},{default:o(()=>[l(G,null,{default:o(()=>[l(we,{variant:"accordion"},{default:o(()=>[l(U,null,{default:o(()=>[l(h,{onClick:t[2]||(t[2]=u=>c("correos"))},{default:o(()=>[E(" Envio por correos ")]),_:1}),l($,{class:"py-4"},{default:o(()=>[l(Ve,{modelValue:p(i),"onUpdate:modelValue":t[3]||(t[3]=u=>B(i)?i.value=u:null),label:"Correos",rules:[p(be)],hint:"Debe separar los correos mediantes (;)"},null,8,["modelValue","rules"])]),_:1})]),_:1}),l(U,null,{default:o(()=>[l(h,{onClick:t[4]||(t[4]=u=>c("cargos"))},{default:o(()=>[E(" Envio por cargos ")]),_:1}),l($,null,{default:o(()=>[z("div",De,[(w(!0),j(ge,null,Ce(p(n).charges,(u,F)=>(w(),Pe(ke,{key:F,modelValue:p(f),"onUpdate:modelValue":t[5]||(t[5]=J=>B(f)?f.value=J:null),value:u.value,label:u.title},null,8,["modelValue","value","label"]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}),l(G,{class:"d-flex justify-end"},{default:o(()=>[l(L,{onClick:t[6]||(t[6]=u=>P())},{default:o(()=>[E(" Enviar ")]),_:1})]),_:1})]),_:1},512),[[D,!p(r)]])]),_:1},8,["title"])]),_:1},8,["modelValue"])])}}});export{Re as _};
