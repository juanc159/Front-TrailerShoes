import{_ as K}from"./HeaderAlertView.vue_vue_type_script_setup_true_lang-e1c88155.js";import{e as M,u as W,x as X,y as R,$ as Y,z as Z,o as r,c as m,d as t,h as a,w as s,E as L,T as k,H as $,g as U,a as g,a7 as ee,a8 as ae,a9 as le,m as D,V as q,Q as y,J as se,R as te,K as z,F as x,P as S,O as f,L as G,C,b as u,t as p,a4 as re,ab as ne,ac as oe,W as ue,a0 as de,aa as ie,I as ce,X as me}from"./index-dd53741e.js";import{u as pe}from"./useSelect2Infite-f4f6a343.js";import{useRequirementStore as ye}from"./useRequirementStore-9d46e190.js";import{V as fe}from"./VTooltip-c58f227b.js";const ve={class:"d-flex justify-content-center aling-items-center"},_e={key:0,class:"d-flex justify-content-between aling-items-center p-2"},be=g("b",{class:"text-warning"},"*",-1),Ve=g("b",{class:"text-warning"},"*",-1),ke={key:2,class:"demo-space-x"},ge=g("b",{class:"text-warning"},"*",-1),we={key:3},he=g("b",{class:"text-warning"},"*",-1),qe={key:4},xe=["href","download"],De=M({__name:"Form",setup(Se){const J=W(),v=ye(),{action:P,formulario:_,requirementTypes_arrayInfo:I,requirementTypes_countLinks:Q,loading:N,disabled:c}=X(v),h=R({}),w=R(Y()),T=R(),d=pe(v.fetchSelectRequirementTypes,I,{}),O=async i=>{var l;v.typeAction=i,c.value=!1,v.clearFormulario(),await((l=T.value)==null?void 0:l.resetValidation()),h.value={},i!="back"&&v.keyList++},j=async()=>{var l;_.value.user_id=J.user.id;const i=await((l=T.value)==null?void 0:l.validate());if(i!=null&&i.valid){const b=await v.fetchSave();b.code===200&&(O("list"),w.value.key++),b.code===422&&(h.value=b.errors??{})}};Z(async()=>{await v.fetchDataForm(),d.dataNueva.value=I.value,d.totalLinks.value=Q.value});const A=i=>{_.value.formData={};const l=d.dataNueva.value.find(b=>b.value==i);l&&(_.value.formData=JSON.parse(JSON.stringify(l)))},E=(i,l)=>{w.value.handleImageSelected(i),setTimeout(()=>{_.value.formData.arrayInputs[l].answer=w.value.imageFile},1e3)};return(i,l)=>{const b=K;return r(),m("div",null,[t(b,{"sub-title":"Solicitud",action:a(P),"validate-crud":!0,"btn-back":!0,onChangeScreenBack:l[0]||(l[0]=o=>O("back"))},null,8,["action"]),t(me,null,{default:s(()=>[t(L,{class:"my-5 px-4",clearable:"",label:"Solicitud",items:a(d).dataNueva.value,modelValue:a(_).requirement_type_id,"onUpdate:modelValue":[l[4]||(l[4]=o=>a(_).requirement_type_id=o),l[5]||(l[5]=o=>{a(h).requirement_type_id="",A(o)})],"error-messages":a(h).requirement_type_id,rules:[a(k)],disabled:a(c)},{"prepend-item":s(()=>[t($,{placeholder:"Buscar...",class:"mb-2",modelValue:a(d).searchQuery.value,"onUpdate:modelValue":l[1]||(l[1]=o=>a(d).searchQuery.value=o)},null,8,["modelValue"]),t(U)]),"append-item":s(()=>[t(U),g("div",ve,[ee(t(ae,{size:"24",color:"primary",indeterminate:""},null,512),[[le,a(N).selectRequirementTypes]])]),a(N).selectRequirementTypes?y("",!0):(r(),m("div",_e,[g("div",null,[t(D,{class:"mt-2",disabled:a(d).page.value<=1,onClick:l[2]||(l[2]=o=>a(d).prev()),color:"success"},{default:s(()=>[t(q,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),t(D,{class:"mt-2",disabled:a(d).page.value>=a(d).totalLinks.value,onClick:l[3]||(l[3]=o=>a(d).next()),color:"success"},{default:s(()=>[t(q,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])]))]),_:1},8,["items","modelValue","error-messages","rules","disabled"]),t(se,null,{default:s(()=>[t(te,{ref_key:"formValidation",ref:T,"lazy-validation":""},{default:s(()=>[t(z,null,{default:s(()=>{var o,F;return[(r(!0),m(x,null,S((F=(o=a(_))==null?void 0:o.formData)==null?void 0:F.arrayInputs,(e,B)=>(r(),f(G,{cols:"12",key:B},{default:s(()=>[e.type_input==1?(r(),f($,{key:0,modelValue:e.answer,"onUpdate:modelValue":n=>e.answer=n,rules:e.required==1?[a(k)]:[],disabled:a(c)},C({_:2},[e.required?{name:"label",fn:s(()=>[u(p(e.label)+" ",1),be]),key:"0"}:{name:"label",fn:s(()=>[u(p(e.label),1)]),key:"1"}]),1032,["modelValue","onUpdate:modelValue","rules","disabled"])):y("",!0),e.type_input==2?(r(),f(L,{key:1,items:e.arrayOptions,"item-value":"id","item-title":"name",modelValue:e.answer,"onUpdate:modelValue":n=>e.answer=n,rules:e.required==1?[a(k)]:[],disabled:a(c)},C({_:2},[e.required?{name:"label",fn:s(()=>[u(p(e.label)+" ",1),Ve]),key:"0"}:{name:"label",fn:s(()=>[u(p(e.label),1)]),key:"1"}]),1032,["items","modelValue","onUpdate:modelValue","rules","disabled"])):y("",!0),e.type_input==3?(r(),m("div",ke,[(r(!0),m(x,null,S(e.arrayOptions,(n,V)=>(r(),f(re,{modelValue:e.answer,"onUpdate:modelValue":H=>e.answer=H,key:V,value:n.id,rules:e.required==1?[a(k)]:[],disabled:a(c)},C({_:2},[e.required?{name:"label",fn:s(()=>[u(p(n.name)+" ",1),ge]),key:"0"}:{name:"label",fn:s(()=>[u(p(n.name),1)]),key:"1"}]),1032,["modelValue","onUpdate:modelValue","value","rules","disabled"]))),128))])):y("",!0),e.type_input==4?(r(),m("div",we,[t(ne,{modelValue:e.answer,"onUpdate:modelValue":n=>e.answer=n,rules:e.required==1?[a(k)]:[],disabled:a(c)},C({default:s(()=>[(r(!0),m(x,null,S(e.arrayOptions,(n,V)=>(r(),f(oe,{key:V,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:2},[e.required?{name:"label",fn:s(()=>[u(p(e.label)+" ",1),he]),key:"0"}:{name:"label",fn:s(()=>[u(p(e.label),1)]),key:"1"}]),1032,["modelValue","onUpdate:modelValue","rules","disabled"])])):y("",!0),e.type_input==5?(r(),m("div",qe,[t(ue,null,{default:s(()=>[u(p(e.label),1)]),_:2},1024),a(c)?y("",!0):(r(),f(de,{"show-size":"",key:a(w).key,onChangeOnce:n=>E(n,B),"onClick:clear":l[6]||(l[6]=n=>a(w).clearData()),rules:e.required==1?[a(k)]:[],disabled:a(c)},{selection:s(({fileNames:n})=>[(r(!0),m(x,null,S(n,V=>(r(),f(ie,{key:V,label:"",size:"small",variant:"outlined",color:"primary",class:"me-2"},{default:s(()=>[u(p(V),1)]),_:2},1024))),128))]),_:2},1032,["onChangeOnce","rules","disabled"])),a(c)?(r(),m("a",{key:1,href:e.answer,download:e.label,target:"_blank"},[t(q,{icon:"mdi-download"}),u(" Descargar ")],8,xe)):y("",!0)])):y("",!0)]),_:2},1024))),128))]}),_:1}),t(U,{class:"border-opacity-75 my-4",color:"cprimary",thickness:3}),a(c)?y("",!0):(r(),f(z,{key:0,class:"pt-0"},{default:s(()=>[t(G,{class:"text-center",cols:"12"},{default:s(()=>[t(fe,{text:"Guardar",location:"top"},{activator:s(({props:o})=>[t(D,ce({class:"ms-1",color:"light",rounded:"lg"},o,{onClick:l[7]||(l[7]=F=>j())}),{default:s(()=>[u(" Guardar  "),t(q,{size:"large",color:"success",icon:"mdi-content-save-outline"})]),_:2},1040)]),_:1})]),_:1})]),_:1}))]),_:1},512)]),_:1})]),_:1})])}}});export{De as _};
