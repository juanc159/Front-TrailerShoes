import{i as L,r as v,s as j,E as R,L as u,k as z,o as N,c as x,d as s,p as t,q as y,b as U,a2 as A,K as D,B as $,C as n,z as f,n as e,aP as E,x as b,a4 as T,a as c,I as P,a5 as Q,J as q,V as _,T as M,Z as G,aQ as J,A as Z,ay as S}from"./index-c9350ca5.js";import{u as H}from"./useSelect2Infite-1d5d9c41.js";import{useCrudUserStore as O}from"./useCrudUserStore-c2e335db.js";const W=c("span",null,"Formulario Usuario",-1),X={class:"d-flex justify-content-center aling-items-center"},Y={key:0,class:"d-flex justify-content-between aling-items-center p-2"},h=L({__name:"Form",setup(ee){const g=v(),m=O(),{formulario:o,arrayRoles:B,identityTypes:F,charges_arrayInfo:w,charges_countLinks:K,loading:C}=j(m),r=v([]),p=v(!1),d=H(m.fetchSelectCharges,w),V=v([]),k=async i=>{var l;m.typeAction=i,V.value=[],r.value=[],await((l=g.value)==null?void 0:l.resetValidation()),i!="back"&&m.keyList++},I=async()=>{var l;const i=await((l=g.value)==null?void 0:l.validate());if(i!=null&&i.valid){const a=await m.fetchSave();a.code===200&&k("list"),a.code===422&&(r.value=a.errors??[])}};return R(o,(i,l)=>{i.id?V.value.password=[]:V.value.password=[u(i.password)]},{deep:!0}),z(async()=>{await m.fetchDataForm(),d.dataNueva.value=w.value,d.totalLinks.value=K.value}),(i,l)=>(N(),x("div",null,[s(A,{class:"d-flex justify-content-between"},{default:t(()=>[W,s(y,{color:"secondary",onClick:l[0]||(l[0]=a=>k("back"))},{default:t(()=>[U("Atras")]),_:1})]),_:1}),s(Z,null,{default:t(()=>[s(D,{ref_key:"formValidation",ref:g,"lazy-validation":""},{default:t(()=>[s($,null,{default:t(()=>[s(n,{cols:"4"},{default:t(()=>[s(f,{clearable:"",modelValue:e(o).email,"onUpdate:modelValue":l[1]||(l[1]=a=>e(o).email=a),autocomplete:"off","error-messages":e(r).email,label:"Email",onKeypress:l[2]||(l[2]=a=>e(r).email=""),rules:[e(u),e(E)]},null,8,["modelValue","error-messages","rules"])]),_:1}),s(n,{cols:"4"},{default:t(()=>[s(f,{clearable:"",rules:e(V).password,autocomplete:"off","onClick:append":l[3]||(l[3]=a=>p.value=!e(p)),type:e(p)?"text":"password","append-icon":e(p)?"mdi-eye":"mdi-eye-off",modelValue:e(o).password,"onUpdate:modelValue":l[4]||(l[4]=a=>e(o).password=a),"error-messages":e(r).password,label:"Contraseña",onKeypress:l[5]||(l[5]=a=>e(r).password="")},null,8,["rules","type","append-icon","modelValue","error-messages"])]),_:1}),s(n,{cols:"4"},{default:t(()=>[s(f,{clearable:"",rules:[e(u)],modelValue:e(o).name,"onUpdate:modelValue":l[6]||(l[6]=a=>e(o).name=a),"error-messages":e(r).name,label:"Nombre",onKeypress:l[7]||(l[7]=a=>e(r).name="")},null,8,["rules","modelValue","error-messages"])]),_:1}),s(n,{cols:"4"},{default:t(()=>[s(f,{clearable:"",rules:[e(u)],modelValue:e(o).lastName,"onUpdate:modelValue":l[8]||(l[8]=a=>e(o).lastName=a),"error-messages":e(r).lastName,label:"Apellido",onKeypress:l[9]||(l[9]=a=>e(r).lastName="")},null,8,["rules","modelValue","error-messages"])]),_:1}),s(n,{cols:"4"},{default:t(()=>[s(b,{clearable:"",rules:[e(u)],items:e(B),modelValue:e(o).role_id,"onUpdate:modelValue":[l[10]||(l[10]=a=>e(o).role_id=a),l[11]||(l[11]=a=>e(r).role_id="")],"item-title":"name","item-value":"id",label:"Rol","error-messages":e(r).role_id},null,8,["rules","items","modelValue","error-messages"])]),_:1}),s(n,{cols:"4"},{default:t(()=>[s(b,{clearable:"","item-title":"name",label:"Cargo","item-value":"id",items:e(d).dataNueva.value,modelValue:e(o).charge_id,"onUpdate:modelValue":[l[15]||(l[15]=a=>e(o).charge_id=a),l[16]||(l[16]=a=>e(r).charge_id="")],"error-messages":e(r).charge_id,rules:[e(u)]},{"prepend-item":t(()=>[s(f,{placeholder:"Buscar...",class:"mb-2",modelValue:e(d).searchQuery.value,"onUpdate:modelValue":l[12]||(l[12]=a=>e(d).searchQuery.value=a)},null,8,["modelValue"]),s(T)]),"append-item":t(()=>[s(T),c("div",X,[P(s(Q,{size:"24",color:"primary",indeterminate:""},null,512),[[q,e(C)]])]),e(C)?M("",!0):(N(),x("div",Y,[c("div",null,[s(y,{class:"mt-2",disabled:e(d).page.value<=1,onClick:l[13]||(l[13]=a=>e(d).prev()),color:"success"},{default:t(()=>[s(_,{icon:"mdi-chevron-left"})]),_:1},8,["disabled"]),s(y,{class:"mt-2",disabled:e(d).page.value>=e(d).totalLinks.value,onClick:l[14]||(l[14]=a=>e(d).next()),color:"success"},{default:t(()=>[s(_,{icon:"mdi-chevron-right"})]),_:1},8,["disabled"])])]))]),_:1},8,["items","modelValue","error-messages","rules"])]),_:1}),s(n,{cols:"4"},{default:t(()=>[s(b,{clearable:"",rules:[e(u)],items:e(F),modelValue:e(o).identity_type_id,"onUpdate:modelValue":[l[17]||(l[17]=a=>e(o).identity_type_id=a),l[18]||(l[18]=a=>e(r).identity_type_id="")],"item-title":"name","item-value":"id",label:"Tipo de identificacion","error-messages":e(r).identity_type_id},null,8,["rules","items","modelValue","error-messages"])]),_:1}),s(n,{cols:"4"},{default:t(()=>[s(f,{clearable:"",maxlength:"10",rules:[e(u),e(G)(e(o).idNumber,10)],modelValue:e(o).idNumber,"onUpdate:modelValue":l[19]||(l[19]=a=>e(o).idNumber=a),"error-messages":e(r).idNumber,label:"identificación",onKeypress:l[20]||(l[20]=a=>{e(r).idNumber="",e(J)(a)})},null,8,["rules","modelValue","error-messages"])]),_:1})]),_:1}),s($,null,{default:t(()=>[s(n,{cols:"12 d-flex justify-content-center"},{default:t(()=>[s(y,{color:"primary",onClick:l[21]||(l[21]=a=>I())},{default:t(()=>[U("Guardar")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]))}});typeof S=="function"&&S(h);export{h as default};
