import{_ as O}from"./HeaderAlertView.vue_vue_type_script_setup_true_lang-e1c88155.js";import{P as W}from"./PreloadInterno-a5d99930.js";import{as as X,b9 as Y,ba as Z,av as E,bb as ee,bc as te,B as M,ax as ae,ay as le,bd as oe,be as N,bf as j,y as _,d as e,I as L,bg as ne,a8 as se,e as ie,al as re,ae as ce,x as ue,z as de,A as H,o as fe,c as me,C as ve,h as c,w as o,a as g,m as x,V as C,b as V,D as pe,E as ge,G as U,H as ye,J as he,K as Ve,L as Q,t as _e,S as we}from"./index-dd53741e.js";import{V as b}from"./VTooltip-c58f227b.js";import{V as xe}from"./VSpacer-ddef0a47.js";import{V as Ce}from"./VPagination-8df84faf.js";import{V as be}from"./VDataTable-d1d16a2f.js";const ke=X()({name:"VSwitch",inheritAttrs:!1,props:{indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Y(),...Z()},emits:{"update:focused":l=>!0,"update:modelValue":()=>!0,"update:indeterminate":l=>!0},setup(l,s){let{attrs:k,slots:m}=s;const u=E(l,"indeterminate"),y=E(l,"modelValue"),{loaderClasses:i}=ee(l),{isFocused:P,focus:S,blur:B}=te(l),r=M(()=>typeof l.loading=="string"&&l.loading!==""?l.loading:l.color),d=ae(),D=M(()=>l.id||`switch-${d}`);function A(){u.value&&(u.value=!1)}return le(()=>{const[$,v]=oe(k),[z,F]=N.filterProps(l),[h,R]=j.filterProps(l),w=_();function n(t){var p,a;t.stopPropagation(),t.preventDefault(),(a=(p=w.value)==null?void 0:p.input)==null||a.click()}return e(N,L({class:["v-switch",{"v-switch--inset":l.inset},{"v-switch--indeterminate":u.value},i.value,l.class],style:l.style},$,z,{id:D.value,focused:P.value}),{...m,default:t=>{let{id:p,messagesId:a,isDisabled:f,isReadonly:G,isValid:J}=t;return e(j,L({ref:w},h,{modelValue:y.value,"onUpdate:modelValue":[T=>y.value=T,A],id:p.value,"aria-describedby":a.value,type:"checkbox","aria-checked":u.value?"mixed":void 0,disabled:f.value,readonly:G.value,onFocus:S,onBlur:B},v),{...m,default:()=>e("div",{class:"v-switch__track",onClick:n},null),input:T=>{let{textColorClasses:K,textColorStyles:q}=T;return e("div",{class:["v-switch__thumb",K.value],style:q.value},[l.loading&&e(ne,{name:"v-switch",active:!0,color:J.value===!1?void 0:r.value},{default:I=>m.loader?m.loader(I):e(se,{active:I.isActive,color:I.color,indeterminate:!0,size:"16",width:"2"},null)})])}})}})}),{}}}),Pe={colspan:"6"},Se={style:{width:"100"},class:"d-flex justify-content-center"},Be={class:"me-3",style:{width:"80px"}},De={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ae={style:{width:"10rem"}},Fe=ie({__name:"TableList",setup(l){const s=re(),k=ce(),{action:m,menus:u,totalPage:y,currentPage:i,totalData:P,loading:S,lastPage:B}=ue(s),r=_(10),d=_(""),D=_(""),A=_(""),$=[{title:"Título",key:"title"},{title:"Icon",key:"icon"},{title:"Padre",key:"father_name"},{title:"Estado",key:"state"},{title:"Principal",key:"principal"},{title:"Acciones",sortable:!1,key:"actions"}],v=async()=>{await s.fetchAll({perPage:r.value,page:i.value,searchQuery:d.value})};de(async()=>{s.typeAction!="back"&&await v()});const z=async n=>{n.length>0&&(D.value=n[0].order,A.value=n[0].key,await v())};H([d,r],async()=>{i.value=1}),H([i,d,r],async()=>{await v()});const F=M(()=>{const n=u.value.length?(i.value-1)*y.value+1:0,t=u.value.length+(i.value-1)*y.value;return`Mostrando ${n} a ${t} de ${P.value} registros`}),h=async(n,t=null)=>{m.value=t==null?"new":"edit",s.clearFormulario(),s.typeAction=n,t&&n=="form"&&s.fetchInfo(t),t&&n=="dynamicPage"&&k.fetchInfoPage(t)},R=async n=>{we.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await s.fetchDelete(n),await v()):t.isDenied})},w=async(n,t)=>{console.log("object",n),console.log("state",t),s.changeState(n,t)};return(n,t)=>{const p=O;return fe(),me("div",null,[e(p,{title:"Listado","sub-title":"Menú dinámico páginas",icon:"mdi-format-list-bulleted"}),e(c(be),{headers:$,items:c(u),"items-per-page":c(r),"onUpdate:sortBy":z},ve({"item.state":o(({item:a})=>[e(ke,{modelValue:a.raw.state,"onUpdate:modelValue":f=>a.raw.state=f,color:"success",inset:"",value:a.raw.state,"true-value":1,"false-value":0,"hide-details":"",onClick:f=>w(a.raw,a.raw.state)},null,8,["modelValue","onUpdate:modelValue","value","onClick"])]),"item.actions":o(({item:a})=>[e(x,{icon:"",size:"x-small",color:"error",variant:"text",onClick:f=>R(a.value)},{default:o(()=>[e(C,{size:"22",icon:"tabler-trash"}),e(b,{activator:"parent",location:"top"},{default:o(()=>[V(" Borrar ")]),_:1})]),_:2},1032,["onClick"]),e(x,{icon:"",size:"x-small",color:"default",variant:"text",onClick:f=>h("form",a.value)},{default:o(()=>[e(C,{size:"22",icon:"tabler-edit"}),e(b,{activator:"parent",location:"top"},{default:o(()=>[V(" Editar ")]),_:1})]),_:2},1032,["onClick"]),e(x,{icon:"",size:"x-small",color:"default",variant:"text",onClick:f=>h("dynamicPage",a.value)},{default:o(()=>[e(C,{size:"22",icon:"tabler-file-info"}),e(b,{activator:"parent",location:"top"},{default:o(()=>[V(" Pagina ")]),_:1})]),_:2},1032,["onClick"])]),top:o(()=>[e(pe,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:o(()=>[g("div",Be,[e(ge,{modelValue:c(r),"onUpdate:modelValue":t[0]||(t[0]=a=>U(r)?r.value=a:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(xe),g("div",De,[g("div",Ae,[e(ye,{modelValue:c(d),"onUpdate:modelValue":t[1]||(t[1]=a=>U(d)?d.value=a:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),e(b,{text:"Menú",location:"top"},{activator:o(({props:a})=>[e(x,L({class:"ms-1",color:"light",rounded:"lg"},a,{onClick:t[2]||(t[2]=f=>h("form"))}),{default:o(()=>[V(" Crear  "),e(C,{size:"large",color:"success",icon:"mdi-plus"})]),_:2},1040)]),_:1})])]),_:1})]),bottom:o(()=>[e(he,{class:"pt-2"},{default:o(()=>[e(Ve,null,{default:o(()=>[e(Q,{lg:"4",cols:"3"},{default:o(()=>[V(_e(c(F)),1)]),_:1}),e(Q,{lg:"8",cols:"9",class:"d-flex justify-end"},{default:o(()=>[e(Ce,{modelValue:c(i),"onUpdate:modelValue":t[3]||(t[3]=a=>U(i)?i.value=a:null),"total-visible":5,size:"small",length:c(B)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[c(S)?{name:"body",fn:o(()=>[g("tr",null,[g("td",Pe,[g("div",Se,[e(W)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])])}}});export{Fe as _};
