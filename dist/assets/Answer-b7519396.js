import{V as T,_ as D}from"./HeaderAlertView.vue_vue_type_script_setup_true_lang-e1c88155.js";import{e as E,y as V,v as F,f as I,z as L,o as l,c as i,d as a,w as e,h as r,O as u,V as p,Q as c,R as P,F as _,P as v,X as U,J as q,K as y,L as w,a as g,t as $,U as G,T as A,ab as H,ac as J,a4 as K,m as M,I as O,b as Q,D as X,s as j,ar as z}from"./index-dd53741e.js";import{useCrudSurveyStore as W}from"./useCrudSurveyStore-07fe3bda.js";import{V as Y}from"./VTooltip-c58f227b.js";const Z=g("b",{class:"text-warning"},"*",-1),ee={key:2,class:"demo-space-x"},ae=E({__name:"Answer",setup(se){const B=j(),x=V(),k=W(),m=F(),h=I(),d=V({}),b=V(null),N=async()=>{var n;const o=await((n=x.value)==null?void 0:n.validate());o!=null&&o.valid&&(d.value.email=m.params.email,(await k.saveAnswer(d.value)).code==200&&h.push("/"))};return L(async()=>{const o=await k.getInfoToAnswer(Number(m.params.id),m.params.email);if(o.code==200)for(const n in o.data)d.value[n]=o.data[n];o.code==422&&(B.toast("Éxito",o.message,"success"),h.push("/"))}),(o,n)=>{const C=D;return l(),i("div",null,[a(X,null,{default:e(()=>[a(C,{title:r(d).name,icon:"mdi-list-box-outline","sub-title":"Responder encuesta","validate-crud":!0,action:"survey"},null,8,["title"]),r(d).description?(l(),u(T,{key:0,class:"mt-5",color:"vwhite",title:"Descripción del formulario",text:r(d).description},{prepend:e(()=>[a(p,{color:"info",size:"x-large",icon:"mdi-information-outline"})]),_:1},8,["text"])):c("",!0),r(b)?(l(),u(T,{key:1,class:"mt-5",color:"vwhite",title:r(b)},{prepend:e(()=>[a(p,{color:"info",size:"x-large",icon:"mdi-information-outline"})]),_:1},8,["title"])):(l(),u(P,{key:2,ref_key:"formValidation",ref:x,"lazy-validation":""},{default:e(()=>[(l(!0),i(_,null,v(r(d).questions,(t,R)=>(l(),u(U,{class:"mt-3",key:R},{default:e(()=>[a(q,null,{default:e(()=>[a(y,null,{default:e(()=>[a(w,{class:"d-flex"},{default:e(()=>[g("h3",null,$(t.question),1),Z]),_:2},1024)]),_:2},1024),g("div",null,[t.type_question==1?(l(),u(G,{key:0,rows:"3",modelValue:t.answer,"onUpdate:modelValue":s=>t.answer=s,rules:[r(A)]},null,8,["modelValue","onUpdate:modelValue","rules"])):c("",!0),t.type_question==2?(l(),u(H,{key:1,modelValue:t.answer,"onUpdate:modelValue":s=>t.answer=s,rules:[r(A)]},{default:e(()=>[a(y,null,{default:e(()=>[(l(!0),i(_,null,v(t.options,(s,f)=>(l(),u(w,{cols:s.name.length>12?12:6,sm:s.name.length>12?6:4,md:s.name.length>12?4:3,key:f},{default:e(()=>[a(J,{label:s.name,value:s.id},null,8,["label","value"])]),_:2},1032,["cols","sm","md"]))),128))]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","rules"])):c("",!0),t.type_question==3?(l(),i("div",ee,[a(y,null,{default:e(()=>[(l(!0),i(_,null,v(t.options,(s,f)=>(l(),u(w,{cols:s.name.length>12?12:6,sm:s.name.length>12?6:4,md:s.name.length>12?4:3,key:f},{default:e(()=>[a(K,{modelValue:t.answer,"onUpdate:modelValue":S=>t.answer=S,label:s.name,value:s.id},null,8,["modelValue","onUpdate:modelValue","label","value"])]),_:2},1032,["cols","sm","md"]))),128))]),_:2},1024)])):c("",!0)])]),_:2},1024)]),_:2},1024))),128)),a(U,{class:"mt-3"},{default:e(()=>[a(q,{class:"text-center pa-3"},{default:e(()=>[a(Y,{text:"Enviar",location:"top"},{activator:e(({props:t})=>[a(M,O({class:"ms-1",color:"light",rounded:"lg"},t,{onClick:n[0]||(n[0]=R=>N())}),{default:e(()=>[Q(" Enviar respuesta  "),a(p,{size:"large",color:"success",icon:"mdi-send-variant-outline"})]),_:2},1040)]),_:1})]),_:1})]),_:1})]),_:1},512))]),_:1})])}}});typeof z=="function"&&z(ae);export{ae as default};
