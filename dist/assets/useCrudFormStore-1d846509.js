import{p as r,q as e,r as i,s as n}from"./index-dd53741e.js";const o=n(),l=r("useCrudFormStore",{state:()=>({loading:!0,typeAction:"list",action:"list",formData:{},keyList:0,forms:[],totalData:0,totalPage:0,currentPage:1,lastPage:0,formulario:{id:null,name:null,arrayInputs:[]}}),getters:{},actions:{clearFormulario(){this.formulario={id:null,name:null,arrayInputs:[]}},async fetchAll(t){this.loading=!0,await e.post("/form-list",t).then(a=>{this.loading=!1,this.forms=a.data.forms,this.totalData=a.data.totalData,this.totalPage=a.data.totalPage,this.currentPage=a.data.currentPage,this.lastPage=a.data.lastPage}).catch(a=>{this.loading=!1,console.log("error",a)})},async fetchSave(){const t=i();return t.isLoading=!0,await e.post("/form-create",this.formulario).then(a=>(t.isLoading=!1,a.data.code===200?o.toast("Éxito",a.data.message,"success"):o.toast("Error",a.data.message,"danger"),{message:a.data.message,code:a.data.code,errors:a.data.errors})).catch(async a=>(t.isLoading=!1,a.response.status===500&&o.toast("Error",a.response.data.message,"danger"),console.log(await a),{errors:a.response.data.errors,code:a.response.data.code,message:a.response.data.message}))},async fetchDelete(t){const a=i();a.isLoading=!0,await e.delete("/form-delete/"+t).then(s=>{a.isLoading=!1,o.toast("Éxito",s.data.message,"success")}).catch(async s=>{a.isLoading=!1,console.log(await s)})},async fetchInfo(t){const a=i();a.isLoading=!0,await e.get(`/form-info/${t}`).then(async s=>{a.isLoading=!1,this.formData.id=t,this.formulario=await s.data.data}).catch(async s=>{a.isLoading=!1,console.log(await s)})}}});export{l as useCrudFormStore};
