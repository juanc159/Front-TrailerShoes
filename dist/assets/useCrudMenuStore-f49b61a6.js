import{k as n,l as s,n as i,p as r}from"./index-8ab07650.js";const o=r(),l=n("useCrudMenuStore",{state:()=>({loading:!0,action:"list",typeAction:"list",menuData:{},keyList:0,menus:[],totalData:0,totalPage:0,currentPage:1,lastPage:0,formulario:{title:"",to:"",icon:"",requiredPermission:""}}),getters:{},actions:{clearFormulario(){this.formulario={title:"",to:"",icon:"",requiredPermission:""}},clonarForm(){for(const t in this.formulario)this.menuData[t]=this.formulario[t]},async fetchAll(t){this.loading=!0,await s.post("/menu-list",t).then(a=>{this.loading=!1,this.menus=a.data.menu,this.totalData=a.data.totalData,this.totalPage=a.data.totalPage,this.currentPage=a.data.currentPage,this.lastPage=a.data.lastPage}).catch(async a=>{this.loading=!1,console.log(await a)})},async fetchSave(){const t=i();return t.isLoading=!0,await s.post("/menu-create",this.formulario).then(a=>(t.isLoading=!1,a.data.code===200?(this.clonarForm(),this.clearFormulario(),o.toast("Éxito",a.data.message,"success")):o.toast("Error",a.data.message,"danger"),{message:a.data.message,code:a.data.code,errors:a.data.errors})).catch(async a=>(t.isLoading=!1,a.response.status===500&&o.toast("Error",a.response.data.message,"danger"),console.log(await a),{errors:a.response.data.errors,code:a.response.data.code,message:a.response.data.message}))},async fetchDelete(t){const a=i();a.isLoading=!0,await s.delete("/menu-delete/"+t).then(e=>{a.isLoading=!1,o.toast("Éxito",e.data.message,"success")}).catch(async e=>{a.isLoading=!1,console.log(await e)})},async fetchInfo(t){const a=i();if(t!==this.menuData.id)a.isLoading=!0,await s.get(`/menu-info/${t}`).then(async e=>{a.isLoading=!1,this.menuData.id=t,this.formulario=await e.data.data,this.clonarForm()}).catch(async e=>{a.isLoading=!1,console.log(await e)});else for(const e in this.menuData)this.formulario[e]=this.menuData[e]}}});export{l as useCrudMenuStore};
