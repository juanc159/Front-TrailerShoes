import{_ as N}from"./HeaderAlertView.vue_vue_type_script_setup_true_lang-e1c88155.js";import{e as I,x as L,y as m,z as U,A as B,B as E,o as R,c as j,d as e,C as H,h as s,w as a,a as r,m as v,V as _,b as f,D as M,E as Q,G as V,H as G,I as J,J as K,K as q,L as b,t as O,S as W}from"./index-dd53741e.js";import{useCrudFormStore as X}from"./useCrudFormStore-1d846509.js";import{P as Y}from"./PreloadInterno-a5d99930.js";import{V as y}from"./VTooltip-c58f227b.js";import{V as Z}from"./VSpacer-ddef0a47.js";import{V as ee}from"./VPagination-8df84faf.js";import{V as te}from"./VDataTable-d1d16a2f.js";const ae={class:"d-flex"},oe={colspan:"4"},le={style:{width:"100"},class:"d-flex justify-content-center"},se={class:"me-3",style:{width:"80px"}},ne={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ie={style:{width:"10rem"}},Ve=I({__name:"TableList",setup(re){const c=X(),{action:k,forms:p,totalPage:g,lastPage:D,currentPage:n,totalData:P,loading:S}=L(c),i=m(10),d=m(""),h=m(""),x=m(""),u=async()=>{await c.fetchAll({perPage:i.value,page:n.value,searchQuery:d.value,sort_direction:h.value,sort_field:x.value})},T=[{title:"Nombre",key:"name"},{title:"Acciones",sortable:!1,key:"actions"}];U(async()=>{await u()});const z=async o=>{o.length>0&&(h.value=o[0].order,x.value=o[0].key,await u())};B([d,i],async()=>{n.value=1}),B([n,d,i],async()=>{await u()});const $=E(()=>{const o=p.value.length?(n.value-1)*g.value+1:0,t=p.value.length+(n.value-1)*g.value;return`Mostrando ${o} a ${t} de ${P.value} registros`}),w=async(o,t=null)=>{k.value=t==null?"new":"edit",c.clearFormulario(),c.typeAction=o,t&&o=="form"&&c.fetchInfo(t)},A=async o=>{W.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await c.fetchDelete(o),await u()):t.isDenied})};return(o,t)=>{const F=N;return R(),j("div",null,[e(F,{title:"Listado","sub-title":"Formularios",icon:"mdi-format-list-bulleted"}),e(s(te),{headers:T,items:s(p),"items-per-page":s(i),"onUpdate:sortBy":z},H({"item.actions":a(({item:l})=>[r("div",ae,[e(v,{size:"x-small",color:"error",variant:"text",icon:"",onClick:C=>A(l.value)},{default:a(()=>[e(_,{size:"22",icon:"tabler-trash"}),e(y,{activator:"parent",location:"top"},{default:a(()=>[f(" Borrar ")]),_:1})]),_:2},1032,["onClick"]),e(v,{icon:"",size:"x-small",color:"default",variant:"text",onClick:C=>w("form",l.value)},{default:a(()=>[e(_,{size:"22",icon:"tabler-edit"}),e(y,{activator:"parent",location:"top"},{default:a(()=>[f(" Editar ")]),_:1})]),_:2},1032,["onClick"])])]),top:a(()=>[e(M,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[r("div",se,[e(Q,{modelValue:s(i),"onUpdate:modelValue":t[0]||(t[0]=l=>V(i)?i.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(Z),r("div",ne,[r("div",ie,[e(G,{modelValue:s(d),"onUpdate:modelValue":t[1]||(t[1]=l=>V(d)?d.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),e(y,{text:"Formulario",location:"top"},{activator:a(({props:l})=>[e(v,J({class:"ms-1",color:"light",rounded:"lg"},l,{onClick:t[2]||(t[2]=C=>w("form"))}),{default:a(()=>[f(" Crear  "),e(_,{size:"large",color:"success",icon:"mdi-plus"})]),_:2},1040)]),_:1})])]),_:1})]),bottom:a(()=>[e(K,{class:"pt-2"},{default:a(()=>[e(q,null,{default:a(()=>[e(b,{lg:"4",cols:"3"},{default:a(()=>[f(O(s($)),1)]),_:1}),e(b,{lg:"8",cols:"9",class:"d-flex justify-end"},{default:a(()=>[e(ee,{modelValue:s(n),"onUpdate:modelValue":t[3]||(t[3]=l=>V(n)?n.value=l:null),"total-visible":5,size:"small",length:s(D)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[s(S)?{name:"body",fn:a(()=>[r("tr",null,[r("td",oe,[r("div",le,[e(Y)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])])}}});export{Ve as _};
