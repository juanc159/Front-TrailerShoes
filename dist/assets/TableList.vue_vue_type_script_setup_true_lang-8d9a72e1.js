import{P as U}from"./PreloadInterno-0cd51b40.js";import{useCrudUserStore as $}from"./useCrudUserStore-c2e335db.js";import{i as I,j,s as E,r as f,k as F,w as x,l as L,o as M,c as Q,d as e,m as q,n as s,p as a,a as d,q as y,V as w,b as m,v as G,x as H,y as v,z as J,A as K,B as O,C,t as W,S as k,D as X}from"./index-c9350ca5.js";import{V as B}from"./VTooltip-7bf3ee5c.js";import{V as Y}from"./VSpacer-99f3f8c3.js";import{V as Z}from"./VPagination-9ea17d1d.js";import{V as ee}from"./VDataTable-1f115dfc.js";const te={colspan:"7"},ae={style:{width:"100"},class:"d-flex justify-content-center"},oe={class:"me-3",style:{width:"80px"}},le={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},se={style:{width:"10rem"}},ye=I({__name:"TableList",setup(ne){j();const r=$(),D=[{title:"Nombre usuario",key:"name"},{title:"Tipo de identificación",key:"identityType_name"},{title:"Número de identificación",key:"idNumber"},{title:"Correo",key:"email"},{title:"Rol",key:"role_name"},{title:"Cargo",key:"charge_name"},{title:"Acciones",sortable:!1,key:"actions"}],{users:p,totalPage:g,lastPage:T,currentPage:n,totalData:b,loading:P,countRoles:S,typeAction:ie}=E(r),i=f(10),c=f(""),V=f(""),_=f(""),u=async()=>{await r.fetchAll({perPage:i.value,page:n.value,searchQuery:c.value,sort_direction:V.value,sort_field:_.value})};F(async()=>{await u()});const A=async l=>{l.length>0&&(V.value=l[0].order,_.value=l[0].key,await u())};x([c,i],async()=>{n.value=1}),x([n,c,i],async()=>{await u()});const N=L(()=>{const l=p.value.length?(n.value-1)*g.value+1:0,t=p.value.length+(n.value-1)*g.value;return`Mostrando ${l} a ${t} de ${b.value} registros`}),h=async(l,t=null)=>{r.clearFormulario(),r.typeAction=l,S.value==0&&l=="form"&&k.fire({title:"Primero debe ingresar los roles",showCancelButton:!1,showDenyButton:!0,denyButtonText:"Cerrar",confirmButtonText:"Ir"}).then(async o=>{o.isConfirmed?X.push("/admin/role"):o.isDenied}),t&&r.fetchInfo(t)},z=async l=>{k.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await r.fetchDelete(l),await u()):t.isDenied})};return(l,t)=>(M(),Q("div",null,[e(s(ee),{headers:D,items:s(p),"items-per-page":s(i),"onUpdate:sortBy":A},q({"item.actions":a(({item:o})=>[e(y,{icon:"",size:"x-small",color:"error",variant:"text",onClick:R=>z(o.value)},{default:a(()=>[e(w,{size:"22",icon:"tabler-trash"}),e(B,{activator:"parent",location:"top"},{default:a(()=>[m(" Borrar ")]),_:1})]),_:2},1032,["onClick"]),e(y,{icon:"",size:"x-small",color:"default",variant:"text",onClick:R=>h("form",o.value)},{default:a(()=>[e(w,{size:"22",icon:"tabler-edit"}),e(B,{activator:"parent",location:"top"},{default:a(()=>[m(" Editar ")]),_:1})]),_:2},1032,["onClick"])]),top:a(()=>[e(G,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[d("div",oe,[e(H,{modelValue:s(i),"onUpdate:modelValue":t[0]||(t[0]=o=>v(i)?i.value=o:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(Y),d("div",le,[d("div",se,[e(J,{modelValue:s(c),"onUpdate:modelValue":t[1]||(t[1]=o=>v(c)?c.value=o:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),e(y,{color:"primary",onClick:t[2]||(t[2]=o=>h("form"))},{default:a(()=>[m(" Agregar ")]),_:1})])]),_:1})]),bottom:a(()=>[e(K,{class:"pt-2"},{default:a(()=>[e(O,null,{default:a(()=>[e(C,{lg:"4",cols:"3"},{default:a(()=>[m(W(s(N)),1)]),_:1}),e(C,{lg:"8",cols:"9",class:"d-flex justify-end"},{default:a(()=>[e(Z,{modelValue:s(n),"onUpdate:modelValue":t[3]||(t[3]=o=>v(n)?n.value=o:null),"total-visible":5,size:"small",length:s(T)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[s(P)?{name:"body",fn:a(()=>[d("tr",null,[d("td",te,[d("div",ae,[e(U)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])]))}});export{ye as _};
