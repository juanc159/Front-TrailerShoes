import{p as d,q as o,r as n,s as r}from"./index-dd53741e.js";const t=r(),c=d("useCrudSurveyStore",{state:()=>({loading:!0,typeAction:"list",action:"list",surveyData:{},keyList:0,surveys:[],totalData:0,totalPage:0,currentPage:1,lastPage:0,formulario:{id:null,name:null,startDate:null,endDate:null,arrayQuestions:[],answerSeveralTimes:0},dataReport:[],headers:[],modalReportView:!1}),getters:{},actions:{clearFormulario(){this.formulario={id:null,name:null,startDate:null,endDate:null,arrayQuestions:[],answerSeveralTimes:null}},async fetchAll(s){this.loading=!0,await o.post("/survey-list",s).then(a=>{this.loading=!1,this.charges=a.data.charges,this.surveys=a.data.surveys,this.totalData=a.data.totalData,this.totalPage=a.data.totalPage,this.currentPage=a.data.currentPage,this.lastPage=a.data.lastPage}).catch(a=>{this.loading=!1,console.log("error",a)})},async fetchSave(){const s=n();return s.isLoading=!0,await o.post("/survey-create",this.formulario).then(a=>(s.isLoading=!1,a.data.code===200?t.toast("Éxito",a.data.message,"success"):t.toast("Error",a.data.message,"danger"),{message:a.data.message,code:a.data.code,errors:a.data.errors})).catch(async a=>(s.isLoading=!1,a.response.status===500&&t.toast("Error",a.response.data.message,"danger"),console.log(await a),{errors:a.response.data.errors,code:a.response.data.code,message:a.response.data.message}))},async fetchDelete(s){const a=n();a.isLoading=!0,await o.delete("/survey-delete/"+s).then(e=>{a.isLoading=!1,t.toast("Éxito",e.data.message,"success")}).catch(async e=>{a.isLoading=!1,console.log(await e)})},async fetchInfo(s){const a=n();a.isLoading=!0,await o.get(`/survey-info/${s}`).then(async e=>{a.isLoading=!1,this.surveyData.id=s,this.formulario=await e.data.data}).catch(async e=>{a.isLoading=!1,console.log(await e)})},async fetchInfoReport(s){const a=n();a.isLoading=!0,await o.get(`/survey-infoReport/${s}`).then(async e=>{a.isLoading=!1,this.dataReport=await e.data.dataReport,this.headers=await e.data.headers}).catch(async e=>{a.isLoading=!1,console.log(await e)})},async sendEmails(s){return await o.post("/survey-sendMail",s).then(a=>(a.data.code===200?t.toast("Éxito",a.data.message,"success"):t.toast("Error",a.data.message,"danger"),{message:a.data.message,code:a.data.code,errors:a.data.errors})).catch(async a=>(a.response.status===500&&t.toast("Error",a.response.data.message,"danger"),console.log(await a),{errors:a.response.data.errors,code:a.response.data.code,message:a.response.data.message}))},async getInfoToAnswer(s,a){return await o.get("/survey-getInfoToAnswer/"+s+"/"+a).then(e=>(e.data.code===200&&t.toast("Éxito",e.data.message,"success"),{message:e.data.message,code:e.data.code,data:e.data.survey,errors:e.data.errors})).catch(async e=>(e.response.status===500&&t.toast("Error",e.response.data.message,"danger"),console.log(await e),{errors:e.response.data.errors,code:e.response.data.code,message:e.response.data.message}))},async saveAnswer(s){const a=n();return a.isLoading=!0,await o.post("/survey-saveAnswer",s).then(e=>(a.isLoading=!1,e.data.code===200?t.toast("Éxito",e.data.message,"success"):t.toast("Error",e.data.message,"danger"),{message:e.data.message,code:e.data.code,errors:e.data.errors})).catch(async e=>(a.isLoading=!1,e.response.status===500&&t.toast("Error",e.response.data.message,"danger"),console.log(await e),{errors:e.response.data.errors,code:e.response.data.code,message:e.response.data.message}))}}});export{c as useCrudSurveyStore};
