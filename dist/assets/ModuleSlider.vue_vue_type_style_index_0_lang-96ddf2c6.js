import{e as D,y as f,$ as M,ae as U,x as R,z as P,o as h,c as $,d as e,w as a,X as j,a5 as N,J as g,h as i,R as O,O as A,a0 as E,T as q,a1 as G,a4 as J,m as _,V,b as X,G as H,ai as K,a as L,aj as Q,s as W}from"./index-dd53741e.js";import{V as Y}from"./VDataTable-d1d16a2f.js";import{V as Z}from"./VTooltip-c58f227b.js";const ee=L("span",null,"Slider",-1),se=D({__name:"ModuleSlider",setup(ae){const S=W(),b=f(),n=f(M()),x=U(),{modalModuleSlider:r,arraySections:c,sectionSelected:u,rowSelected:d,columnsSelected:m,editModuleSlider:w}=R(x),l=f([]);P(()=>{if(w.value){const t=Object.assign([],c.value[u.value].arrayRows[d.value].columns[m.value].contentSlider);l.value=t}});const y=()=>{n.value.clearData()},v=()=>{r.value=!1,l.value=[],y()},I=async()=>{l.value.length>1?(c.value[u.value].arrayRows[d.value].columns[m.value].contentSlider=l.value,v()):S.toast("Advertencia","Debe agregar almenos dos imagenes","info")},T=[{title:"Imagen",sortable:!1,key:"image"},{title:"Acciones",sortable:!1,key:"actions"}],z=t=>{n.value.handleImageSelected(t),setTimeout(()=>{let o=!1;l.value.length==0&&(o=!0),l.value.push({imageFile:n.value.imageFile,imageUrl:n.value.imageUrl,principal:o}),n.value.key++},1e3)},F=t=>{l.value.forEach(o=>{o.principal=!1}),l.value[t].principal=!0},B=t=>{l.value.splice(t,1),c.value[u.value].arrayRows[d.value].columns[m.value].keySlider++};return(t,o)=>{const k=Q;return h(),$("div",null,[e(K,{modelValue:i(r),"onUpdate:modelValue":o[1]||(o[1]=s=>H(r)?r.value=s:null),width:"800",persistent:""},{default:a(()=>[e(k,{onClick:v}),e(j,null,{default:a(()=>[e(N,{"primary-title":""},{default:a(()=>[ee]),_:1}),e(g,null,{default:a(()=>[e(i(O),{ref_key:"formFileValidation",ref:b,"lazy-validation":""},{default:a(()=>[(h(),A(E,{key:i(n).key,accept:"image/*",rules:[i(q)],onChangeOnce:o[0]||(o[0]=s=>z(s)),"onClick:clear":y},null,8,["rules"]))]),_:1},512)]),_:1}),e(g,null,{default:a(()=>[e(i(Y),{headers:T,items:i(l)},{"item.image":a(({item:s})=>[e(G,{src:s.raw.imageUrl},null,8,["src"])]),"item.actions":a(({item:s,index:C})=>[e(J,{modelValue:s.raw.principal,"onUpdate:modelValue":p=>s.raw.principal=p,label:"Principal",onChange:p=>F(C)},null,8,["modelValue","onUpdate:modelValue","onChange"]),e(_,{icon:"",size:"x-small",color:"error",variant:"text",onClick:p=>B(C)},{default:a(()=>[e(V,{size:"22",icon:"tabler-trash"}),e(Z,{activator:"parent",location:"top"},{default:a(()=>[X(" Borrar ")]),_:1})]),_:2},1032,["onClick"])]),bottom:a(()=>[]),_:1},8,["items"])]),_:1}),e(g,{class:"d-flex justify-end"},{default:a(()=>[e(_,{size:"40",color:"error",icon:"",class:"mr-3",onClick:v},{default:a(()=>[e(V,{size:"30",icon:"tabler-circle-x"})]),_:1}),e(_,{size:"40",color:"success",icon:"",onClick:I},{default:a(()=>[e(V,{size:"30",icon:"tabler-circle-check"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{se as _};
