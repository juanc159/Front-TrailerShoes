import{P as $}from"./PreloadInterno-0cd51b40.js";import{useCrudRoleStore as I}from"./useCrudRoleStore-badf9d0d.js";import{i as N,s as R,r as f,k as U,w as x,l as j,o as E,c as F,d as e,m as L,n as s,p as a,a as d,q as v,V as w,b as p,v as M,x as Q,y,z as q,A as G,B as H,C,t as J,S as K}from"./index-c9350ca5.js";import{V as k}from"./VTooltip-7bf3ee5c.js";import{V as O}from"./VSpacer-99f3f8c3.js";import{V as W}from"./VPagination-9ea17d1d.js";import{V as X}from"./VDataTable-1f115dfc.js";const Y={colspan:"4"},Z={style:{width:"100"},class:"d-flex justify-content-center"},ee={class:"me-3",style:{width:"80px"}},te={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ae={style:{width:"10rem"}},ue=N({__name:"TableList",setup(oe){const i=I(),{roles:m,totalPage:V,lastPage:B,currentPage:n,totalData:D,loading:b}=R(i),r=f(10),c=f(""),g=f(""),_=f(""),S=[{title:"Nombre",key:"name"},{title:"Descripcion",key:"description"},{title:"Acciones",sortable:!1,key:"actions"}],u=async()=>{await i.fetchAll({perPage:r.value,page:n.value,searchQuery:c.value,sort_direction:g.value,sort_field:_.value})};U(async()=>{await u()});const P=async o=>{o.length>0&&(g.value=o[0].order,_.value=o[0].key,await u())};x([c,r],async()=>{n.value=1}),x([n,c,r],async()=>{await u()});const T=j(()=>{const o=m.value.length?(n.value-1)*V.value+1:0,t=m.value.length+(n.value-1)*V.value;return`Mostrando ${o} a ${t} de ${D.value} registros`}),h=async(o,t=null)=>{i.clearFormulario(),i.typeAction=o,t&&i.fetchInfo(t)},z=async o=>{K.fire({title:"Â¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await i.fetchDelete(o),await u()):t.isDenied})};return(o,t)=>(E(),F("div",null,[e(s(X),{headers:S,items:s(m),"items-per-page":s(r),"onUpdate:sortBy":P},L({"item.actions":a(({item:l})=>[e(v,{icon:"",size:"small",color:"error",variant:"text",onClick:A=>z(l.value)},{default:a(()=>[e(w,{size:"22",icon:"tabler-trash"}),e(k,{activator:"parent",location:"top"},{default:a(()=>[p(" Borrar ")]),_:1})]),_:2},1032,["onClick"]),e(v,{icon:"",size:"small",color:"default",variant:"text",onClick:A=>h("form",l.value)},{default:a(()=>[e(w,{size:"22",icon:"tabler-edit"}),e(k,{activator:"parent",location:"top"},{default:a(()=>[p(" Editar ")]),_:1})]),_:2},1032,["onClick"])]),top:a(()=>[e(M,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[d("div",ee,[e(Q,{modelValue:s(r),"onUpdate:modelValue":t[0]||(t[0]=l=>y(r)?r.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(O),d("div",te,[d("div",ae,[e(q,{modelValue:s(c),"onUpdate:modelValue":t[1]||(t[1]=l=>y(c)?c.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),e(v,{color:"primary",onClick:t[2]||(t[2]=l=>h("form"))},{default:a(()=>[p(" Agregar ")]),_:1})])]),_:1})]),bottom:a(()=>[e(G,{class:"pt-2"},{default:a(()=>[e(H,null,{default:a(()=>[e(C,{lg:"4",cols:"3"},{default:a(()=>[p(J(s(T)),1)]),_:1}),e(C,{lg:"8",cols:"9",class:"d-flex justify-end"},{default:a(()=>[e(W,{modelValue:s(n),"onUpdate:modelValue":t[3]||(t[3]=l=>y(n)?n.value=l:null),"total-visible":5,size:"small",length:s(B)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[s(b)?{name:"body",fn:a(()=>[d("tr",null,[d("td",Y,[d("div",Z,[e($)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])]))}});export{ue as _};
