import{p as n,q as t,r as o,s as r}from"./index-dd53741e.js";const i=r(),c=n("useCrudPermissionStore",{state:()=>({loading:!0,action:"list",typeAction:"list",permissionData:{},keyList:0,permissions:[],totalData:0,totalPage:0,currentPage:1,lastPage:0,arrayMenus:[],formulario:{menu_id:"",name:"",description:""}}),getters:{},actions:{clearFormulario(){this.formulario={menu_id:"",name:"",description:""}},async fetchAll(s){this.loading=!0,await t.post("/permission-list",s).then(a=>{this.loading=!1,this.permissions=a.data.permission,this.totalData=a.data.totalData,this.totalPage=a.data.totalPage,this.currentPage=a.data.currentPage,this.lastPage=a.data.lastPage}).catch(a=>{this.loading=!1,console.log("error",a)})},async fetchDataForm(){const s=o();s.isLoading=!0,await t.get("/permission-dataForm").then(a=>{s.isLoading=!1,this.arrayMenus=a.data.menus}).catch(async a=>{s.isLoading=!1,console.log(await a)})},async fetchSave(){const s=o();return s.isLoading=!0,await t.post("/permission-create",this.formulario).then(a=>(s.isLoading=!1,a.data.code===200?i.toast("Éxito",a.data.message,"success"):i.toast("Error",a.data.message,"danger"),{message:a.data.message,code:a.data.code,errors:a.data.errors})).catch(async a=>(s.isLoading=!1,a.response.status===500&&i.toast("Error",a.response.data.message,"danger"),console.log(await a),{errors:a.response.data.errors,code:a.response.data.code,message:a.response.data.message}))},async fetchDelete(s){const a=o();a.isLoading=!0,await t.delete("/permission-delete/"+s).then(e=>{a.isLoading=!1,i.toast("Éxito",e.data.message,"success")}).catch(async e=>{a.isLoading=!1,console.log(await e)})},async fetchInfo(s){const a=o();a.isLoading=!0,await t.get(`/permission-info/${s}`).then(async e=>{a.isLoading=!1,this.permissionData.id=s,this.formulario=await e.data.data}).catch(async e=>{a.isLoading=!1,console.log(await e)})}}});export{c as useCrudPermissionStore};
