import{P as z}from"./PreloadInterno-0cd51b40.js";import{useCrudMenuStore as I}from"./useCrudMenuStore-a042ad18.js";import{i as $,s as M,r as f,k as N,w as h,l as U,o as R,c as j,d as e,m as E,n,p as a,a as d,q as y,V as _,b as p,v as F,x as L,y as v,z as Q,A as q,B as G,C as x,t as H,S as J}from"./index-c9350ca5.js";import{V as w}from"./VTooltip-7bf3ee5c.js";import{V as K}from"./VSpacer-99f3f8c3.js";import{V as O}from"./VPagination-9ea17d1d.js";import{V as W}from"./VDataTable-1f115dfc.js";const X={colspan:"4"},Y={style:{width:"100"},class:"d-flex justify-content-center"},Z={class:"me-3",style:{width:"80px"}},ee={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},te={style:{width:"10rem"}},de=$({__name:"TableList",setup(ae){const i=I(),{menus:m,totalPage:V,currentPage:s,totalData:k,loading:C}=M(i),r=f(10),c=f(""),B=f(""),D=f(""),b=[{title:"Título",key:"title"},{title:"Direccionar a",key:"to"},{title:"Icon",key:"icon"},{title:"Acciones",sortable:!1,key:"actions"}],u=async()=>{await i.fetchAll({perPage:r.value,page:s.value,searchQuery:c.value})};N(async()=>{i.typeAction!="back"&&await u()});const S=async o=>{o.length>0&&(B.value=o[0].order,D.value=o[0].key,await u())};h([c,r],async()=>{s.value=1}),h([s,c,r],async()=>{await u()});const T=U(()=>{const o=m.value.length?(s.value-1)*V.value+1:0,t=m.value.length+(s.value-1)*V.value;return`Mostrando ${o} a ${t} de ${k.value} registros`}),g=async(o,t=null)=>{i.clearFormulario(),i.typeAction=o,t&&i.fetchInfo(t)},P=async o=>{J.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async t=>{t.isConfirmed?(await i.fetchDelete(o),await u()):t.isDenied})};return(o,t)=>(R(),j("div",null,[e(n(W),{headers:b,items:n(m),"items-per-page":n(r),"onUpdate:sortBy":S},E({"item.actions":a(({item:l})=>[e(y,{icon:"",size:"x-small",color:"error",variant:"text",onClick:A=>P(l.value)},{default:a(()=>[e(_,{size:"22",icon:"tabler-trash"}),e(w,{activator:"parent",location:"top"},{default:a(()=>[p(" Borrar ")]),_:1})]),_:2},1032,["onClick"]),e(y,{icon:"",size:"x-small",color:"default",variant:"text",onClick:A=>g("form",l.value)},{default:a(()=>[e(_,{size:"22",icon:"tabler-edit"}),e(w,{activator:"parent",location:"top"},{default:a(()=>[p(" Editar ")]),_:1})]),_:2},1032,["onClick"])]),top:a(()=>[e(F,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[d("div",Z,[e(L,{modelValue:n(r),"onUpdate:modelValue":t[0]||(t[0]=l=>v(r)?r.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(K),d("div",ee,[d("div",te,[e(Q,{modelValue:n(c),"onUpdate:modelValue":t[1]||(t[1]=l=>v(c)?c.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),e(y,{color:"primary",onClick:t[2]||(t[2]=l=>g("form"))},{default:a(()=>[p(" Agregar ")]),_:1})])]),_:1})]),bottom:a(()=>[e(q,{class:"pt-2"},{default:a(()=>[e(G,null,{default:a(()=>[e(x,{lg:"4",cols:"3"},{default:a(()=>[p(H(n(T)),1)]),_:1}),e(x,{lg:"8",cols:"9",class:"d-flex justify-end"},{default:a(()=>[e(O,{modelValue:n(s),"onUpdate:modelValue":t[3]||(t[3]=l=>v(s)?s.value=l:null),"total-visible":5,size:"small",length:o.lastPage},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[n(C)?{name:"body",fn:a(()=>[d("tr",null,[d("td",X,[d("div",Y,[e(z)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])]))}});export{de as _};
