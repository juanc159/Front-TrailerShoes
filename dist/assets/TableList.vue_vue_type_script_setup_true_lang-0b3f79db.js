import{i as I,s as $,r as f,k as N,w as x,l as F,o as R,c as U,d as t,m as j,n as s,p as a,a as c,q as v,V as w,b as m,v as E,x as L,y,z as M,A as Q,B as q,C,t as G,S as H}from"./index-c9350ca5.js";import{P as J}from"./PreloadInterno-0cd51b40.js";import{useCrudFormStore as K}from"./useCrudFormStore-03c0a364.js";import{V as B}from"./VTooltip-7bf3ee5c.js";import{V as O}from"./VSpacer-99f3f8c3.js";import{V as W}from"./VPagination-9ea17d1d.js";import{V as X}from"./VDataTable-1f115dfc.js";const Y={class:"d-flex"},Z={colspan:"4"},ee={style:{width:"100"},class:"d-flex justify-content-center"},te={class:"me-3",style:{width:"80px"}},ae={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},oe={style:{width:"10rem"}},fe=I({__name:"TableList",setup(le){const r=K(),{forms:p,totalPage:V,lastPage:k,currentPage:n,totalData:b,loading:D}=$(r),i=f(10),d=f(""),_=f(""),g=f(""),u=async()=>{await r.fetchAll({perPage:i.value,page:n.value,searchQuery:d.value,sort_direction:_.value,sort_field:g.value})},S=[{title:"Nombre",key:"name"},{title:"Acciones",sortable:!1,key:"actions"}];N(async()=>{await u()});const P=async o=>{o.length>0&&(_.value=o[0].order,g.value=o[0].key,await u())};x([d,i],async()=>{n.value=1}),x([n,d,i],async()=>{await u()});const T=F(()=>{const o=p.value.length?(n.value-1)*V.value+1:0,e=p.value.length+(n.value-1)*V.value;return`Mostrando ${o} a ${e} de ${b.value} registros`}),h=async(o,e=null)=>{r.clearFormulario(),r.typeAction=o,e&&o=="form"&&r.fetchInfo(e),e&&o=="report"&&r.fetchInfoReport(e)},z=async o=>{H.fire({title:"Â¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async e=>{e.isConfirmed?(await r.fetchDelete(o),await u()):e.isDenied})};return(o,e)=>(R(),U("div",null,[t(s(X),{headers:S,items:s(p),"items-per-page":s(i),"onUpdate:sortBy":P},j({"item.actions":a(({item:l})=>[c("div",Y,[t(v,{size:"x-small",color:"error",variant:"text",icon:"",onClick:A=>z(l.value)},{default:a(()=>[t(w,{size:"22",icon:"tabler-trash"}),t(B,{activator:"parent",location:"top"},{default:a(()=>[m(" Borrar ")]),_:1})]),_:2},1032,["onClick"]),t(v,{icon:"",size:"x-small",color:"default",variant:"text",onClick:A=>h("form",l.value)},{default:a(()=>[t(w,{size:"22",icon:"tabler-edit"}),t(B,{activator:"parent",location:"top"},{default:a(()=>[m(" Editar ")]),_:1})]),_:2},1032,["onClick"])])]),top:a(()=>[t(E,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[c("div",te,[t(L,{modelValue:s(i),"onUpdate:modelValue":e[0]||(e[0]=l=>y(i)?i.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),t(O),c("div",ae,[c("div",oe,[t(M,{modelValue:s(d),"onUpdate:modelValue":e[1]||(e[1]=l=>y(d)?d.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),t(v,{color:"primary",onClick:e[2]||(e[2]=l=>h("form"))},{default:a(()=>[m(" Agregar ")]),_:1})])]),_:1})]),bottom:a(()=>[t(Q,{class:"pt-2"},{default:a(()=>[t(q,null,{default:a(()=>[t(C,{lg:"4",cols:"3"},{default:a(()=>[m(G(s(T)),1)]),_:1}),t(C,{lg:"8",cols:"9",class:"d-flex justify-end"},{default:a(()=>[t(W,{modelValue:s(n),"onUpdate:modelValue":e[3]||(e[3]=l=>y(n)?n.value=l:null),"total-visible":5,size:"small",length:s(k)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[s(D)?{name:"body",fn:a(()=>[c("tr",null,[c("td",Z,[c("div",ee,[t(J)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])]))}});export{fe as _};
