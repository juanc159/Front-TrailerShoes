import{P as U}from"./PreloadInterno-0cd51b40.js";import{i as M,ah as N,a9 as E,s as R,r as p,k as j,w as x,l as F,o as L,c as Q,d as e,m as q,n as s,p as t,a as d,q as y,V,b as f,v as G,x as H,y as h,z as J,A as K,B as O,C as k,t as W,S as X}from"./index-c9350ca5.js";import{V as Y}from"./VSwitch-06c07aaf.js";import{V as _}from"./VTooltip-7bf3ee5c.js";import{V as Z}from"./VSpacer-99f3f8c3.js";import{V as ee}from"./VPagination-9ea17d1d.js";import{V as ae}from"./VDataTable-1f115dfc.js";const te={colspan:"6"},le={style:{width:"100"},class:"d-flex justify-content-center"},oe={class:"me-3",style:{width:"80px"}},se={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ne={style:{width:"10rem"}},ye=M({__name:"TableList",setup(ie){const n=N(),P=E(),{menus:v,totalPage:w,currentPage:i,totalData:C,loading:S,lastPage:B}=R(n),r=p(10),c=p(""),D=p(""),b=p(""),T=[{title:"Título",key:"title"},{title:"Icon",key:"icon"},{title:"Padre",key:"father_name"},{title:"Estado",key:"state"},{title:"Principal",key:"principal"},{title:"Acciones",sortable:!1,key:"actions"}],m=async()=>{await n.fetchAll({perPage:r.value,page:i.value,searchQuery:c.value})};j(async()=>{n.typeAction!="back"&&await m()});const z=async o=>{o.length>0&&(D.value=o[0].order,b.value=o[0].key,await m())};x([c,r],async()=>{i.value=1}),x([i,c,r],async()=>{await m()});const $=F(()=>{const o=v.value.length?(i.value-1)*w.value+1:0,a=v.value.length+(i.value-1)*w.value;return`Mostrando ${o} a ${a} de ${C.value} registros`}),g=async(o,a=null)=>{n.clearFormulario(),n.typeAction=o,a&&o=="form"&&n.fetchInfo(a),a&&o=="dynamicPage"&&P.fetchInfoPage(a)},A=async o=>{X.fire({title:"¿Desea eliminar el registro?",showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Si",denyButtonText:"No"}).then(async a=>{a.isConfirmed?(await n.fetchDelete(o),await m()):a.isDenied})},I=async(o,a)=>{console.log("object",o),console.log("state",a),n.changeState(o,a)};return(o,a)=>(L(),Q("div",null,[e(s(ae),{headers:T,items:s(v),"items-per-page":s(r),"onUpdate:sortBy":z},q({"item.state":t(({item:l})=>[e(Y,{modelValue:l.raw.state,"onUpdate:modelValue":u=>l.raw.state=u,color:"success",inset:"",value:l.raw.state,"true-value":1,"false-value":0,"hide-details":"",onClick:u=>I(l.raw,l.raw.state)},null,8,["modelValue","onUpdate:modelValue","value","onClick"])]),"item.actions":t(({item:l})=>[e(y,{icon:"",size:"x-small",color:"error",variant:"text",onClick:u=>A(l.value)},{default:t(()=>[e(V,{size:"22",icon:"tabler-trash"}),e(_,{activator:"parent",location:"top"},{default:t(()=>[f(" Borrar ")]),_:1})]),_:2},1032,["onClick"]),e(y,{icon:"",size:"x-small",color:"default",variant:"text",onClick:u=>g("form",l.value)},{default:t(()=>[e(V,{size:"22",icon:"tabler-edit"}),e(_,{activator:"parent",location:"top"},{default:t(()=>[f(" Editar ")]),_:1})]),_:2},1032,["onClick"]),e(y,{icon:"",size:"x-small",color:"default",variant:"text",onClick:u=>g("dynamicPage",l.value)},{default:t(()=>[e(V,{size:"22",icon:"tabler-file-info"}),e(_,{activator:"parent",location:"top"},{default:t(()=>[f(" Pagina ")]),_:1})]),_:2},1032,["onClick"])]),top:t(()=>[e(G,{fluid:"",class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[d("div",oe,[e(H,{modelValue:s(r),"onUpdate:modelValue":a[0]||(a[0]=l=>h(r)?r.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(Z),d("div",se,[d("div",ne,[e(J,{modelValue:s(c),"onUpdate:modelValue":a[1]||(a[1]=l=>h(c)?c.value=l:null),placeholder:"Buscar",density:"compact"},null,8,["modelValue"])]),e(y,{color:"primary",onClick:a[2]||(a[2]=l=>g("form"))},{default:t(()=>[f(" Agregar ")]),_:1})])]),_:1})]),bottom:t(()=>[e(K,{class:"pt-2"},{default:t(()=>[e(O,null,{default:t(()=>[e(k,{lg:"4",cols:"3"},{default:t(()=>[f(W(s($)),1)]),_:1}),e(k,{lg:"8",cols:"9",class:"d-flex justify-end"},{default:t(()=>[e(ee,{modelValue:s(i),"onUpdate:modelValue":a[3]||(a[3]=l=>h(i)?i.value=l:null),"total-visible":5,size:"small",length:s(B)},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1})]),_:2},[s(S)?{name:"body",fn:t(()=>[d("tr",null,[d("td",te,[d("div",le,[e(U)])])])]),key:"0"}:void 0]),1032,["items","items-per-page"])]))}});export{ye as _};
