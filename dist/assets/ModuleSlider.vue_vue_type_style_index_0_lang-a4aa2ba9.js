import{i as z,r as f,U as B,a9 as D,s as R,k as N,o as h,c as P,d as e,p as a,H as A,a2 as $,A as g,n as r,K as j,R as q,W as E,L as O,X as H,a0 as K,q as _,V,b as L,y as W,M as X,a as G,N as J,h as Q}from"./index-c9350ca5.js";import{V as Y}from"./VDataTable-1f115dfc.js";import{V as Z}from"./VTooltip-7bf3ee5c.js";const ee=G("span",null,"Slider",-1),se=z({__name:"ModuleSlider",setup(ae){const S=Q(),b=f(),n=f(B()),x=D(),{modalModuleSlider:i,arraySections:c,sectionSelected:u,rowSelected:d,columnsSelected:m,editModuleSlider:I}=R(x),l=f([]);N(()=>{if(I.value){const t=Object.assign([],c.value[u.value].arrayRows[d.value].columns[m.value].contentSlider);l.value=t}});const y=()=>{n.value.clearData()},v=()=>{i.value=!1,l.value=[],y()},w=async()=>{l.value.length>1?(c.value[u.value].arrayRows[d.value].columns[m.value].contentSlider=l.value,v()):S.toast("Advertencia","Debe agregar almenos dos imagenes","info")},F=[{title:"Imagen",sortable:!1,key:"image"},{title:"Acciones",sortable:!1,key:"actions"}],M=t=>{n.value.handleImageSelected(t),setTimeout(()=>{let o=!1;l.value.length==0&&(o=!0),l.value.push({imageFile:n.value.imageFile,imageUrl:n.value.imageUrl,principal:o}),n.value.key++},1e3)},T=t=>{l.value.forEach(o=>{o.principal=!1}),l.value[t].principal=!0},U=t=>{l.value.splice(t,1),c.value[u.value].arrayRows[d.value].columns[m.value].keySlider++};return(t,o)=>{const k=J;return h(),P("div",null,[e(X,{modelValue:r(i),"onUpdate:modelValue":o[1]||(o[1]=s=>W(i)?i.value=s:null),width:"800",persistent:""},{default:a(()=>[e(k,{onClick:v}),e(A,null,{default:a(()=>[e($,{"primary-title":""},{default:a(()=>[ee]),_:1}),e(g,null,{default:a(()=>[e(r(j),{ref_key:"formFileValidation",ref:b,"lazy-validation":""},{default:a(()=>[(h(),q(E,{key:r(n).key,accept:"image/*",rules:[r(O)],onChangeOnce:o[0]||(o[0]=s=>M(s)),"onClick:clear":y},null,8,["rules"]))]),_:1},512)]),_:1}),e(g,null,{default:a(()=>[e(r(Y),{headers:F,items:r(l)},{"item.image":a(({item:s})=>[e(H,{src:s.raw.imageUrl},null,8,["src"])]),"item.actions":a(({item:s,index:C})=>[e(K,{modelValue:s.raw.principal,"onUpdate:modelValue":p=>s.raw.principal=p,label:"Principal",onChange:p=>T(C)},null,8,["modelValue","onUpdate:modelValue","onChange"]),e(_,{icon:"",size:"x-small",color:"error",variant:"text",onClick:p=>U(C)},{default:a(()=>[e(V,{size:"22",icon:"tabler-trash"}),e(Z,{activator:"parent",location:"top"},{default:a(()=>[L(" Borrar ")]),_:1})]),_:2},1032,["onClick"])]),bottom:a(()=>[]),_:1},8,["items"])]),_:1}),e(g,{class:"d-flex justify-end"},{default:a(()=>[e(_,{size:"40",color:"error",icon:"",class:"mr-3",onClick:v},{default:a(()=>[e(V,{size:"30",icon:"tabler-circle-x"})]),_:1}),e(_,{size:"40",color:"success",icon:"",onClick:w},{default:a(()=>[e(V,{size:"30",icon:"tabler-circle-check"})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{se as _};
