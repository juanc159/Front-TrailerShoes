import{_ as C}from"./HeaderAlertView.vue_vue_type_script_setup_true_lang-e1c88155.js";import{e as U,u as T,x as w,y,z as $,N as k,T as m,o as K,c as F,d as a,w as o,J as S,R as A,K as v,L as n,H as f,h as e,b as u,E as B,a2 as z,ad as E,g as P,m as R,I as D,V as G,X as H,a as V}from"./index-dd53741e.js";import{useCrudUserStore as I}from"./useCrudUserStore-44b2acae.js";import{V as M}from"./VTooltip-c58f227b.js";const q=V("b",{class:"text-warning"},"*",-1),J=V("b",{class:"text-warning"},"*",-1),L=V("b",{class:"text-warning"},"*",-1),X=V("b",{class:"text-warning"},"*",-1),j=V("b",{class:"text-warning"},"*",-1),ee=U({__name:"Form",setup(O){const d=T(),{identityTypes:x}=w(d),b=I(),{formulario:l}=w(b),g=y(),r=y([]),c=y(!1),N=async()=>{var s;const i=await((s=g.value)==null?void 0:s.validate());if(i!=null&&i.valid){const p=await b.fetchSave();await d.fetchUserAuthenticated(),console.log(p),p.code===422&&(r.value=p.errors??[])}};$(async()=>{l.value={id:d.user.id,email:d.user.email,name:d.user.name,lastName:d.user.lastName,role_id:d.user.role_id,identity_type_id:d.user.identity_type_id,charge_id:d.user.charge_id,idNumber:d.user.idNumber,password:null},await d.fetchDataForm()});const _=y([]);return k(l,(i,s)=>{i.id?_.value.password=[]:_.value.password=[m(i.password)]},{deep:!0}),(i,s)=>{const p=C;return K(),F("div",null,[a(p,{"sub-title":"Perfil","validate-crud":!0,action:"edit"}),a(H,null,{default:o(()=>[a(S,null,{default:o(()=>[a(A,{ref_key:"formValidation",ref:g,"lazy-validation":""},{default:o(()=>[a(v,null,{default:o(()=>[a(n,{cols:"12",md:"6"},{default:o(()=>[a(f,{clearable:"",modelValue:e(l).name,"onUpdate:modelValue":s[0]||(s[0]=t=>e(l).name=t),rules:[e(m)],"error-messages":e(r).name,onKeypress:s[1]||(s[1]=t=>e(r).name="")},{label:o(()=>[u(" Nombre "),q]),_:1},8,["modelValue","rules","error-messages"])]),_:1}),a(n,{cols:"12",md:"6"},{default:o(()=>[a(f,{clearable:"",modelValue:e(l).lastName,"onUpdate:modelValue":s[2]||(s[2]=t=>e(l).lastName=t),rules:[e(m)],"error-messages":e(r).name,onKeypress:s[3]||(s[3]=t=>e(r).name="")},{label:o(()=>[u(" Apellido "),J]),_:1},8,["modelValue","rules","error-messages"])]),_:1}),a(n,{cols:"12",md:"6"},{default:o(()=>[a(f,{clearable:"",autocomplete:"off",modelValue:e(l).email,"onUpdate:modelValue":s[4]||(s[4]=t=>e(l).email=t),rules:[e(m)],"error-messages":e(r).name,onKeypress:s[5]||(s[5]=t=>e(r).email="")},{label:o(()=>[u(" Email "),L]),_:1},8,["modelValue","rules","error-messages"])]),_:1}),a(n,{cols:"12",md:"6"},{default:o(()=>[a(f,{clearable:"",autocomplete:"off",type:e(c)?"text":"password",modelValue:e(l).password,"onUpdate:modelValue":s[6]||(s[6]=t=>e(l).password=t),rules:e(_).password,"onClick:append":s[7]||(s[7]=t=>c.value=!e(c)),"append-icon":e(c)?"mdi-eye":"mdi-eye-off","error-messages":e(r).password,onKeypress:s[8]||(s[8]=t=>e(r).password="")},{label:o(()=>[u(" Contraseña "),X]),_:1},8,["type","modelValue","rules","append-icon","error-messages"])]),_:1}),a(n,{cols:"12",md:"6"},{default:o(()=>[a(B,{clearable:"",items:e(x),"item-title":"name","item-value":"id",modelValue:e(l).identity_type_id,"onUpdate:modelValue":[s[9]||(s[9]=t=>e(l).identity_type_id=t),s[10]||(s[10]=t=>e(r).identity_type_id="")],rules:[e(m)],"error-messages":e(r).identity_type_id},{label:o(()=>[u(" Tipo de identificación "),j]),_:1},8,["items","modelValue","rules","error-messages"])]),_:1}),a(n,{cols:"4"},{default:o(()=>[a(f,{clearable:"",maxlength:"10",rules:[e(m),e(z)(e(l).idNumber,10)],modelValue:e(l).idNumber,"onUpdate:modelValue":s[11]||(s[11]=t=>e(l).idNumber=t),"error-messages":e(r).idNumber,label:"identificación",onKeypress:s[12]||(s[12]=t=>{e(r).idNumber="",e(E)(t)})},null,8,["rules","modelValue","error-messages"])]),_:1})]),_:1}),a(P,{class:"border-opacity-75 my-4",color:"csecundary",thickness:3}),a(v,{class:"pt-0"},{default:o(()=>[a(n,{cols:"12",class:"text-center"},{default:o(()=>[a(M,{text:"Guardar",location:"top"},{activator:o(({props:t})=>[a(R,D({class:"ms-1",color:"light",rounded:"lg"},t,{onClick:s[13]||(s[13]=Q=>N())}),{default:o(()=>[u(" Guardar  "),a(G,{size:"large",color:"success",icon:"mdi-content-save-outline"})]),_:2},1040)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})])}}});export{ee as _};
